<div class="m-grid__item m-grid__item--fluid m-wrapper">
  <!-- BEGIN: Subheader -->
  <div class="m-subheader ">
    <div class="d-flex align-items-center">
      <div class="mr-auto">
        <h3 class="m-subheader__title m-subheader__title--separator">
          Warehouse Manager
        </h3>
      </div>
      <div>
        <div class="m-dropdown m-dropdown--inline m-dropdown--arrow m-dropdown--align-right m-dropdown--align-push"
          m-dropdown-toggle="hover" aria-expanded="true">
          <a href="#" class="m-portlet__nav-link btn btn-lg btn-secondary  m-btn m-btn--outline-2x m-btn--air m-btn--icon m-btn--icon-only m-btn--pill  m-dropdown__toggle">
            <i class="la la-plus m--hide"></i> <i class="la la-ellipsis-h"></i>
          </a>
          <div class="m-dropdown__wrapper">
            <span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
            <div class="m-dropdown__inner">
              <div class="m-dropdown__body">
                <div class="m-dropdown__content">
                  <ul class="m-nav">
                    <li class="m-nav__section m-nav__section--first m--hide">
                      <span class="m-nav__section-text">Quick Actions</span>
                    </li>
                    <li class="m-nav__item">
                      <a href="#" class="m-nav__link" (click)="getSuppliers($event)">
                        <i class="m-nav__link-icon flaticon-users"></i>
                        <span class="m-nav__link-text">Vendors / Customers</span>
                      </a>
                    </li>
                    <li class="m-nav__item">
                      <a href="#" class="m-nav__link" (click)="productManager($event)">
                        <i class="m-nav__link-icon flaticon-tea-cup"></i>
                        <span class="m-nav__link-text">Product</span>
                      </a>
                    </li>
                    <li class="m-nav__item">
                      <a href="javascript:;" class="m-nav__link" (click)="getOpenTracking(0)">
                        <i class="m-nav__link-icon flaticon-clipboard"></i>
                        <span class="m-nav__link-text">Tracking</span>
                      </a>
                    </li>

                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- END: Subheader -->
  <div class="m-content">
    <div class="row">
      <div class="col-md-12">
        <!--begin::Portlet-->
        <div class="m-portlet">
          <div class="m-portlet__head">
            <div class="m-portlet__head-caption">
              <div class="m-portlet__head-title">
                <br /><br />
                <div class="m-alert m-alert--icon m-alert--outline alert alert-primary" role="alert">
                  <div class="m-alert__icon"><i class="la la-warning"></i></div>
                  <div class="m-alert__text">
                    <strong>Heads up! </strong> Manage your warehouse activities, your
                    inventory, stock count, create purchase order, raise order fulfilment, track
                    activities in one console.
                  </div>
                  <div class="m-alert__actions" style="width: 200px;">
                    <button type="button" (click)="addWarehouse()" class="btn btn-default btn-sm m-btn m-btn--pill m-btn--wide"
                      title="Click to add new warehouse if not using our warehouse services">
                      Add New warehouse
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="m-portlet__body" class="col-md-12">
            <ul class="nav nav-tabs  m-tabs-line m-tabs-line--brand" role="tablist">
              <li class="nav-item m-tabs__item">
                <a class="nav-link m-tabs__link active" data-toggle="tab" href="#m_tabs_9_1" role="tab"><i class="flaticon-home"></i>Warehouse</a>
              </li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane active" id="m_tabs_9_1" role="tabpanel">
                <div class="col-lg-12">
                  <!--begin::Portlet-->
                  <div class="m-portlet m-portlet--full-height">
                    <div class="m-portlet__head">
                      <div class="m-portlet__head-caption">
                        <div class="m-portlet__head-title">

                          <button class="btn btn-danger pull-right" (click)="getOpenTracking(0)">Tracking activities</button>
                          &nbsp;
                          <button class="btn btn-danger pull-right" (click)="getSuppliers($event)">Vendor / Customers</button>
                          &nbsp;
                          <button class="btn btn-danger pull-right" (click)="productManager($event)">Product</button>
                        </div>
                      </div>
                    </div>
                    <div class="m-portlet__body">
                      <!--begin::Section-->
                      <div class="m-accordion m-accordion--default" id="m_accordion_1" role="tablist">
                        <!--begin::Item-->
                        <div class="m-accordion__item" *ngFor="let item of warehouses">
                          <div class="m-accordion__item-head collapsed" role="tab" id="m_accordion_1_item_1_head"
                            data-toggle="collapse" href="#m_accordion_1_item_1_body" aria-expanded="    false">
                            <span class="m-accordion__item-icon"><i class="fa flaticon-user-ok text-success"></i></span>
                            <span class="m-accordion__item-title text-success"><strong>{{ item.name | uppercase }} ::
                                {{ item.location }}</strong></span>

                            <span class="m-accordion__item-mode"></span>
                          </div>
                          <div class="m-accordion__item-body collapse" id="m_accordion_1_item_1_body" class=" " role="tabpanel"
                            aria-labelledby="m_accordion_1_item_1_head" data-parent="#m_accordion_1">
                            <div class="m-accordion__item-content">
                              <p style="padding-left: 20px;">
                                {{ item.remarks }} <br>
                                <a href="{{item.pic}}" target="_blank">See photo</a> | <a href="#" title="Can't find my way, click here !"
                                  (click)="viewDirection(item.name, item.location, item.lat, item.log, $event)">View
                                  directions</a> | <a href="#" (click)="editWarehouse(item.id, item.name, item.location, item.pic, item.lat, item.log, item.sqm, $event)">Edit</a>
                                | <a href="#" title="check the usability, statistics and capacity of this warehouse">usability</a>
                              </p>
                            </div>
                          </div>
                          <div class="float-right" style="padding-right: 20px;">

                            <button type="button" (click)="createPurchase(item.id, item.name, item.location)" class="btn btn-danger btn-sm m-btn m-btn--pill m-btn--wide"
                              title="Create new purchase order">
                              <i class="m-nav__link-icon flaticon-interface-10"></i>
                              Purchase order
                            </button>

                            &nbsp; &nbsp;

                            <button type="button" (click)="openSaleOrder(item.id, item.name, item.location, item.lat, item.log)"
                              class="btn btn-success btn-sm m-btn m-btn--pill m-btn--wide" title="Create new sale order">
                              <i class="m-nav__link-icon flaticon-shopping-basket"></i>
                              Order Fulfilment
                            </button>

                            &nbsp; &nbsp;

                            <button type="button" class="btn btn-info btn-sm m-btn m-btn--pill m-btn--wide" title="Create new purchase order"
                              (click)="gotoInventory(item.id, item.name, item.location)">
                              <i class="m-nav__link-icon flaticon-list-3"></i>
                              Inventory
                            </button>
                            &nbsp; &nbsp;

                            <button type="button" (click)="ngxSmartModalService.getModal('myModal').open()" class="btn btn-warning btn-sm m-btn m-btn--pill m-btn--wide"
                              title="Manages your box or boxes ! ">
                              <i class="m-nav__link-icon flaticon-app"></i> Manage your
                              Boxes
                            </button>
                          </div>
                          <br />
                          <br />
                        </div>

                        <!--end::Item-->
                      </div>

                      <!--end::Section-->
                    </div>
                  </div>

                  <!--end::Portlet-->
                </div>
              </div>

            </div>
          </div>
        </div>

        <!--end::Portlet-->
      </div>
    </div>
  </div>
</div>

<ngx-smart-modal #myModal identifier="myModal" (onOpen)="loadBox()">
  <h3>Manage your box(s)</h3>


  <div class="row">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__head">
          <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
              <h3 class="m-portlet__head-text">
                Box List
              </h3>
            </div>
          </div>
        </div>
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12" style="overflow-y: auto; height: 500px;">
            <span class="m-section__sub">
              <div class="m-alert m-alert--icon m-alert--outline alert alert-primary" role="alert" *ngIf="warehouseChoice">
                <div class="m-alert__icon"><i class="la la-warning"></i></div>
                <div class="m-alert__text">
                  <strong>Heads up! </strong> You may not be able to use this service, however, if you wish to allow us
                  to manage
                  your warehouse for you, kindly notify us !
                </div>
                <div class="m-alert__actions" style="width: 200px;">
                  <button type="button" (click)="notifyUs()" class="btn btn-danger btn-sm m-btn m-btn--pill m-btn--wide"
                    title="Please notify us">
                    Notify us
                  </button>
                </div>
              </div>
            </span>
            <div class="m-section__content">
              <table class="table">
                <thead>
                  <tr>
                    <th>Reference</th>
                    <th>BIN</th>
                    <th>Warehouse</th>
                    <th>Box</th>
                    <th>Cost</th>
                    <th>Started</th>
                    <th>Expired</th>
                    <th>Remarks</th>
                    <th></th>
                  </tr>
                </thead>

                <tbody>
                  <tr *ngFor="let item of subscribed_boxes; let i = index" [ngClass]="item.remain_days   <=  5 ?  'bg-danger' : '' ">

                    <td>{{item.reference | uppercase}}</td>
                    <td>{{item.bin}} - {{item.box_personal_number}}</td>
                    <td>{{item.warehouse}} - {{item.location}} <br> <a href="{{item.warehouse_pic}}" target="_blank">See
                        Photo</a>
                      | <a href="#" title="see directions to this warehouse">See directions</a></td>
                    <td> <a href="{{item.box_pic}}" target="_blank"><img src="{{item.box_pic}}" alt="Box Photo" height="70px"></a>
                      <strong>{{item.box}}</strong> <br /> <a href="#" title="see purchase orders">P. Orders</a> | <a
                        href="#" title="see sales orders">S. Orders</a> | <a href="#" title="check out the usage of this box usage">Usage</a></td>
                    <td>{{item.charge_cost | currency: ' NGN '}}</td>
                    <td>{{item.started | date: 'fullDate'}}</td>
                    <td>{{item.end_date | date: 'fullDate'}}</td>
                    <td>You have {{item.remain_days}}days left ! <br>

                      <progress-bar [progress]="(item.remain_days/item.elapsed_days) * 100" [color-degraded]="{'0': '#00cbcb',  '15': '#f9c3d3', '25': '#fd8c8e'}"
                        (click)="remainDays(item.remain_days)" style="cursor:pointer">
                      </progress-bar>

                    </td>
                    <td>
                      <button type="button" (click)="getBoxDetails(item.charge_cost, item.charge_id, item.warehouse_id)"
                        data-toggle="modal" data-target="#paymeOrRenewal" class="btn btn-success btn-sm m-btn m-btn--pill m-btn--wide"
                        title="Renew box package or extends expiry days">
                        Renew/Extend
                      </button>
                    </td>
                  </tr>
                </tbody>

              </table>
            </div>
          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="myModal.close()">Close</button>
</ngx-smart-modal>













<ngx-smart-modal #productmanager1 identifier="productmanager1">
  <h3>Porduct Manager </h3>


  <div class="row">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__head">
          <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
              <button type="button" (click)="addnewproduct()" class="btn btn-danger btn-sm m-btn m-btn--pill m-btn--wide"
                title="New Product">
                Add new product
              </button>
            </div>
          </div>
        </div>
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12" style="overflow-y: auto; height: 500px;">

            <div class="m-section__content">
              <table class="table">
                <thead>

                  <th>Code</th>
                  <th>Name</th>
                  <th>Description</th>
                  <th>Unit</th>
                  <td>Case Measure</td>
                  <td>Qty/Case</td>
                  <td>Sqm</td>
                  <td>Cost</td>
                  <td>S.Price</td>
                  <td></td>

                </thead>
                <tbody>
                  <tr *ngFor="let item of products">
                    <td>{{item.code | uppercase}}</td>
                    <td>{{item.name | uppercase}}</td>
                    <td>{{item.description}}</td>
                    <td>{{item.single_unit}}</td>
                    <td>{{item.case_measure}}</td>
                    <td>{{item.qty_per_case}}</td>
                    <td>{{item.sqm}}</td>
                    <td>{{item.cost | currency: 'NGN'}}</td>
                    <td>{{item.sale_price | currency: 'NGN'}}</td>
                    <td><a href="#" data-toggle="modal" data-target="#productModal" (click)="editProduct(item.code, item.name,item.description, item.single_unit, item.case_measure, item.qty_per_case, item.sqm, item.cost, item.sale_price, item.id)">
                        <i class="m-nav__link-icon flaticon-edit"></i></a></td>
                  </tr>
                </tbody>



              </table>
            </div>
          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="productmanager1.close()">Close</button>
</ngx-smart-modal>











<ngx-smart-modal #newwarehouse identifier="newwarehouse">
  <h3>Warehouse</h3>


  <div class="row">
    <div class="col-xl-10">

      <!--begin::Portlet-->
      <div class="m-portlet">

        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-10">
            <span class="m-section__sub">

            </span>
            <div class="m-section__content">
              <form #theformwarehouse=ngForm (ngSubmit)="addNewWarehouse()">
                <div class="form-group">
                  <input type="text" class="form-control" id="recipient-name" name="name" [(ngModel)]="warehouse.name"
                    placeholder="Name" required="">
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="recipient-name" name="location" [(ngModel)]="warehouse.location"
                    placeholder="Location. Full address street." required="">
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="recipient-name" name="pic" [(ngModel)]="warehouse.pic"
                    placeholder="URL Photo">
                </div>
                <div class="form-group">
                  <input type="text" (keypress)="Onlynumber($event)" class="form-control" id="recipient-name" name="sqm"
                    [(ngModel)]="warehouse.sqm" placeholder="Enter Total number of Sqare Meter(sqm). digit only">
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="recipient-name" name="lat" [(ngModel)]="warehouse.lat"
                    placeholder="Lat. E.g 45635664">
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="recipient-name" name="log" [(ngModel)]="warehouse.log"
                    placeholder="Log. E.g 45635664">
                </div>




                <button type="submit" class="btn btn-success btn-block" [disabled]="!theformwarehouse.valid">Submit</button>

              </form>
            </div>
          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="newwarehouse.close()">Close</button>
</ngx-smart-modal>





<ngx-smart-modal #warehousemap identifier="warehousemap">
  <h3>{{warehouseName}} :: {{warehouseLocation}}</h3>


  <div class="row">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12">
            <agm-map [latitude]="warehouseLat" [longitude]="warehouseLog">
              <agm-marker [latitude]="warehouseLat" [longitude]="warehouseLog"></agm-marker>
            </agm-map>

          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="warehousemap.close()">Close</button>
</ngx-smart-modal>













<div class="modal fade" id="paymeOrRenewal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Pay {{ grand_total | currency: ' NGN '}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- <div style="padding-left: 60px;">
          <img src="../../../assets/images/logo.PNG" alt="Pay via paystack" width="100px" height="100px">
        </div> -->
        <span class="text-muted">Wallet Bal.: </span> &nbsp; &nbsp;
        <span class="m-widget25__price m--font-brand" style="font-size: 22px;">{{walletTotal | currency: 'NGN'}}</span>
        <br />
        <span>Would you have preferred to pay from your wallet instead ? &nbsp; <input type="checkbox" [checked]="payFromMyWallet"
            (change)="payFromMyWallet = !payFromMyWallet" /> </span>
        <hr />
        <div class="form-group">
          <span style="color: red;">Enter the number of months you wish to extend/renew. Default is one month</span>
          <input type="text" maxlength="1" (keypress)="Onlynumber($event)" class="form-control" id="recipient-month"
            name="month" placeholder="Enter Months count" [(ngModel)]="month_value" (blur)="updateCost($event)">
        </div>

        <form #theform=ngForm *ngIf="!payFromMyWallet">
          <div class="form-group">
            <input type="text" maxlength="16" (keypress)="Onlynumber($event)" class="form-control" id="recipient-name"
              name="number" [(ngModel)]="charge.card.number" placeholder="Card No. 0000-0000-0000-0000" required="">
          </div>
          <div class="form-group">
            <input type="text" (keypress)="Onlynumber($event)" maxlength="2" class="form-control" name="expiry_month"
              [(ngModel)]="charge.card.expiry_month" id="recipient-name" placeholder="Exp. Month E.g 09" required="">
          </div>
          <div class="form-group">
            <input type="text" (keypress)="Onlynumber($event)" maxlength="2" class="form-control" name="expiry_year"
              [(ngModel)]="charge.card.expiry_year" id="recipient-name" placeholder="Exp. Year E.g 21" required="">
          </div>
          <div class="form-group">
            <input type="text" (keypress)="Onlynumber($event)" maxlength="3" class="form-control" name="cvv"
              [(ngModel)]="charge.card.cvv" id="recipient-name" placeholder="cvv E.g 657" required="">
          </div>

          <button type="button" (click)="payForBoxRenewal()" class="btn btn-success btn-block" [disabled]="!theform.valid">PAY
            {{grand_total | currency: ' NGN '}}</button>

        </form>
      </div>
      <div class="modal-footer" *ngIf="payFromMyWallet">
        <button type="button" (click)="payFromWallet2()" class="btn btn-danger btn-block">PAY
          {{grand_total | currency: ' NGN '}}</button>

      </div>
    </div>
  </div>
</div>





<div class="modal fade" id="productModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Product Form</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form #productForm=ngForm>
          <div class="row">
            <div class="col-xl-6">
              <div class="form-group">
                <label for="recipient-name" class="form-control-label">Product Code</label>
                <input type="text" class="form-control" id="recipient-name" name="code" placeholder="Product code"
                  [(ngModel)]="product.code">
              </div>
              <div class="form-group">
                <label for="recipient-name" class="form-control-label">Name</label>
                <input type="text" class="form-control" id="recipient-name" name="name" placeholder="name" [(ngModel)]="product.name"
                  required>
              </div>
              <div class="form-group">
                <label for="message-text3" class="form-control-label">Weight <span style="color: red">*</span></label>
                <input type="text" class="form-control" id="recipient-name3" name="single_unit" placeholder="Weight in Kg"
                  [(ngModel)]="product.single_unit" required="">
              </div>
              <!--<div class="form-group">
                <label for="message-text2" class="form-control-label">Case Measure</label>
                <input type="text" class="form-control" id="recipient-name2" name="case_measure" placeholder="Case measure"
                  [(ngModel)]="product.case_measure">
              </div>
              <div class="form-group">
                <label for="message-text2" class="form-control-label">Qty Per Case</label>
                <input type="text" (keypress)="Onlynumber($event)" class="form-control" id="recipient-name2" name="qty_per_case"
                  placeholder="Quantity per case" [(ngModel)]="product.qty_per_case">
              </div> -->

            </div>
            <div class="col-xl-6">
              <div class="form-group">
                <label for="message-text4" class="form-control-label">Description</label>
                <textarea class="form-control" id="message-text4" name="description" placeholder="description"
                  [(ngModel)]="product.description"></textarea>
              </div>
              <!-- <div class="form-group">
                <label for="message-text2" class="form-control-label">Size in Square Meter(sqm)</label>
                <input type="text" class="form-control" id="recipient-name2" name="sqm" placeholder="Size in Square Meter(sqm). digit only"
                  [(ngModel)]="product.sqm" required>
              </div>
              <div class="form-group">
                <label for="message-text2" class="form-control-label">Cost Price</label>
                <input type="text" (keypress)="Onlynumber($event)" class="form-control" id="recipient-name2" name="cost"
                  placeholder="Cost Price" [(ngModel)]="product.cost">
              </div> -->
              <div class="form-group">
                <label for="message-text2" class="form-control-label">Selling Price</label>
                <input type="text" class="form-control" id="recipient-name2" name="sale_price" placeholder="Selling Price"
                  [(ngModel)]="product.sale_price">
              </div>
            </div>
          </div>

        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" [disabled]="!productForm.valid" (click)="submitProduct()">Submit</button>
      </div>
    </div>
  </div>
</div>



<ngx-smart-modal #purchaseorderlist identifier="purchaseorderlist">
  <h3>Purchase Orders ({{warehouse_name}}) -> Open and Delivered</h3>
  <div class="row">
    <div class="col-xl-12">
      <div class="m-portlet m-portlet--tabs">
        <div class="m-portlet__head">
          <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
              <button type="button" class="btn btn-danger btn-sm m-btn m-btn--pill m-btn--wide" (click)="addNewPurchaseOrder()">Add
                New
                Purchase Order
              </button>
            </div>
          </div>
          <div class="m-portlet__head-tools">
            <ul class="nav nav-tabs m-tabs-line m-tabs-line--right" role="tablist">
              <li class="nav-item m-tabs__item">
                <a class="nav-link m-tabs__link active" data-toggle="tab" href="#m_portlet_base_demo_1_tab_content"
                  role="tab" (click)="getOpenPurchaseOrders(0)">
                  <i class="flaticon-folder-3"></i> Open
                </a>
              </li>
              <li class="nav-item m-tabs__item">
                <a class="nav-link m-tabs__link" data-toggle="tab" href="#m_portlet_base_demo_2_tab_content" (click)="getOpenPurchaseOrders(1)"
                  role="tab">
                  <i class="flaticon-folder-2"></i> Delivered
                </a>
              </li>

            </ul>
          </div>
        </div>
        <div class="m-portlet__body">
          <div class="tab-content">
            <div class="tab-pane active" id="m_portlet_base_demo_1_tab_content" role="tabpanel">
              <div class="col-md-12">
                <span class="m-section__sub">
                  <div class="m-alert m-alert--icon m-alert--outline alert alert-primary" role="alert">
                    <div class="m-alert__icon">
                      <i class="la la-warning"></i>
                    </div>
                    <div class="m-alert__text">
                      <strong>Purchase Transactions ! </strong> This console shows the list of open purchase
                      orders (created and sent).
                    </div>
                    <div class="m-alert__actions" style="width: 200px;">
                      <button type="button" class="btn btn-danger btn-sm m-btn m-btn--pill m-btn--wide" (click)="addNewPurchaseOrder()">Add
                        New
                        Purchase Order
                      </button>
                    </div>
                  </div>
                </span>
                <div class="m-section__content" style="overflow-y: auto; height: 500px ;">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Status</th>
                        <th>Order #</th>
                        <th>Vendor</th>
                        <th>Expected</th>
                        <th>Remarks</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of purchaseOrderList">
                        <td>
                          <span *ngIf="item.send_warehouse == 1" class="m-badge m-badge--success" title="sent to myWarehouse for processing"></span>
                          <span *ngIf="item.send_warehouse == 0" class="m-badge m-badge--warning" title="Not yet sent"></span>

                        </td>
                        <td>
                          {{item.order_no}}
                        </td>
                        <td>{{item.vendor_name | uppercase}}</td>
                        <td>{{item.expected_delivered_date | date:'fullDate'}}</td>

                        <td *ngIf="item.elapsed >= 0" class="bg-success" style="color: white"> Expected in
                          {{item.elapsed}} day(s)</td>
                        <td *ngIf="item.elapsed < 0" class="bg-danger" style="color: white"> Overdue for
                          {{item.elapsed}} day(s)</td>
                        <td> <a href="#" title="View" (click)="viewPurchase(item.id, item.order_no, item.expected_delivered_date, item.vendor,item.total, item.send_warehouse, item.status, item.warehouse, item.name, $event)"><i
                              class="flaticon-arrows"></i></a> </td>
                      </tr>
                    </tbody>


                  </table>
                </div>
              </div>
            </div>
            <div class="tab-pane" id="m_portlet_base_demo_2_tab_content" role="tabpanel">
              <div class="m-section__content" style="overflow-y: auto; height: 500px ;">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Status</th>
                      <th>Order #</th>
                      <th>Vendor</th>
                      <th>Expected</th>
                      <th>Received</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of purchaseOrderList">
                      <th>
                        <span *ngIf="item.send_warehouse == 1" class="m-badge m-badge--success" title="sent to myWarehouse for processing"></span>
                        <span *ngIf="item.send_warehouse == 0" class="m-badge m-badge--warning" title="Not yet sent"></span>

                      </th>
                      <td>
                        {{item.order_no}}
                      </td>
                      <td>{{item.vendor_name | uppercase}}</td>
                      <td>{{item.expected_delivered_date | date:'fullDate'}}</td>
                      <td>{{item.delivered_date | date:'fullDate'}}</td>
                      <td>
                        <a href="#" title="View" (click)="viewPurchase(item.id, item.order_no, item.expected_delivered_date, item.vendor,item.total, item.send_warehouse, item.status, item.warehouse, item.name, $event)"><i
                            class="flaticon-arrows"></i></a>
                      </td>


                    </tr>
                  </tbody>


                </table>
              </div>
            </div>




          </div>
        </div>
      </div>








    </div>

  </div>


  <button (click)="purchaseorderlist.close()">Close</button>
</ngx-smart-modal>




<!--tracking-->
<ngx-smart-modal #tracking identifier="tracking">
  <h3>Tracking ( Purchase Order and Order fulfilments )</h3>

  <div class="row">
    <div class="col-xl-12">


      <div class="m-portlet m-portlet--tabs">
        <div class="m-portlet__head">
          <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
              <h3 class="m-portlet__head-text">
                Tracking
              </h3>
            </div>
          </div>
          <div class="m-portlet__head-tools">
            <ul class="nav nav-tabs m-tabs-line m-tabs-line--right" role="tablist">
              <li class="nav-item m-tabs__item">
                <a class="nav-link m-tabs__link active" data-toggle="tab" href="#m_portlet_base_demo_1_tab_content"
                  (click)="getOpenTracking(0)" role="tab">
                  <i class="flaticon-folder-2"></i> Open
                </a>
              </li>
              <li class="nav-item m-tabs__item">
                <a class="nav-link m-tabs__link" data-toggle="tab" href="#m_portlet_base_demo_2_tab_content" (click)="getOpenTracking(1)"
                  role="tab">
                  <i class="flaticon-folder-3"></i> Closed
                </a>
              </li>

            </ul>
          </div>
        </div>
        <div class="m-portlet__body">
          <div class="tab-content">
            <div class="tab-pane active" id="m_portlet_base_demo_1_tab_content" role="tabpanel">
              <div class="col-md-12">
                <span class="m-section__sub">

                </span>
                <div class="m-section__content" style="overflow-y: auto; height: 500px ;">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Order No</th>
                        <th>Order</th>
                        <th>Warehouse</th>
                        <th>Expected</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of openTrackings" style="color:red">
                        <td>
                          <a href="#" title="view order details" (click)="viewPurchase(item.id, item.order_no, item.expected_delivered_date, item.vendor,item.total, item.send_warehouse, item.status, item.warehouse, item.name, $event)">{{item.order_no}}</a>
                        </td>
                        <td>{{item.remarks}}</td>
                        <td>{{item.name | uppercase}}</td>
                        <td>{{item.expected_delivered_date | date:'fullDate'}}</td>
                        <td>
                          <a href="#" (click)="openClientMessage(item.notification_id, item.name, item.order_no, item.remarks, $event)"
                            title="message count"><i class="flaticon-comment"></i><span class="badge badge-danger">{{item.total_count}}</span></a>
                        </td>
                      </tr>
                    </tbody>


                  </table>
                </div>
              </div>
            </div>
            <div class="tab-pane" id="m_portlet_base_demo_2_tab_content" role="tabpanel">
              <div class="m-section__content" style="overflow-y: auto; height: 500px ;">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Order No</th>
                      <th>Order</th>
                      <th>Warehouse</th>
                      <th>Expected</th>
                      <th>Received</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of openTrackings" style="color:green">
                      <td>
                        <a href="#" title="view order details" (click)="viewPurchase(item.id, item.order_no, item.expected_delivered_date, item.vendor,item.total, item.send_warehouse, item.status, item.warehouse, item.name, $event)">{{item.order_no}}</a>
                      </td>
                      <td>{{item.remarks}}</td>
                      <td>{{item.name | uppercase}}</td>
                      <td>{{item.expected_delivered_date | date:'fullDate'}}</td>
                      <td>{{item.delivered_date | date:'fullDate'}}</td>
                      <td>
                        <a href="#" (click)="openClientMessage(item.notification_id, item.name, item.order_no, item.remarks, $event)"
                          title="message count"><i class="flaticon-comment"></i><span class="badge badge-danger">{{item.total_count}}</span></a>
                      </td>
                    </tr>
                  </tbody>


                </table>
              </div>
            </div>





          </div>
        </div>
      </div>








    </div>

  </div>


  <button (click)="tracking.close()">Close</button>
</ngx-smart-modal>


<ngx-smart-modal #mysupplier identifier="mysupplier">
  <h3>Vendors / Customers </h3>


  <div class="row">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__head">
          <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
              <button type="button" (click)="addvendorcustomer()" class="btn btn-danger btn-sm m-btn m-btn--pill m-btn--wide"
                title="New vendor">
                Add new vendor / Customer
              </button> &nbsp;&nbsp;&nbsp;
              <select name="vendorCustomer" id="" class="form-control float-right" (change)="getVendorCustomers($event)">
                <option value="1">Vendors</option>
                <option value="2">Customers</option>
              </select>
            </div>
          </div>
        </div>
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12" style="overflow-y: auto; height: 500px;">

            <div class="m-section__content">
              <table class="table">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Phone</th>
                    <th>Email</th>
                    <th>Address</th>
                    <td></td>
                  </tr>
                </thead>

                <tbody>
                  <tr *ngFor="let item of vendorcustomers">
                    <td>{{item.name | uppercase}}</td>
                    <td>{{item.phone}}</td>
                    <td>{{item.email}}</td>
                    <td>{{item.address}}</td>
                    <td><a href="#" data-toggle="modal" data-target="#vendorModal" (click)="editVendor(item.name, item.phone, item.email, item.address, item.vendorCustomer, item.id)">
                        <i class="m-nav__link-icon flaticon-edit"></i></a></td>
                  </tr>
                </tbody>


              </table>
            </div>
          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="mysupplier.close()">Close</button>
</ngx-smart-modal>



<div class="modal fade" id="vendorModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Vendor Form</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form #vendorForm2=ngForm>
          <div class="form-group">
            <label for="recipient-name" class="form-control-label">Vendor/Customer</label>
            <select name="vendorCustomer" [(ngModel)]="vendor.vendorCustomer" id="" class="form-control">
              <option value="1">Vendor</option>
              <option value="2">Customer</option>
            </select>
          </div>
          <div class="form-group">
            <label for="recipient-name" class="form-control-label">Name</label>
            <input type="text" class="form-control" id="recipient-name" name="name" placeholder="name" [(ngModel)]="vendor.name"
              required>
          </div>
          <div class="form-group">
            <label for="message-text2" class="form-control-label">Phone</label>
            <input type="text" class="form-control" id="recipient-name2" name="phone" placeholder="phone" [(ngModel)]="vendor.phone"
              required>
          </div>
          <div class="form-group">
            <label for="message-text3" class="form-control-label">Email</label>
            <input type="text" class="form-control" id="recipient-name3" name="email" placeholder="email" [(ngModel)]="vendor.email">
          </div>
          <div class="form-group">
            <label for="message-text4" class="form-control-label">Address</label>
            <textarea class="form-control" id="message-text4" name="adddress" placeholder="address" [(ngModel)]="vendor.address"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" [disabled]="!vendorForm2.valid" (click)="submitVendor()">Submit</button>
      </div>
    </div>
  </div>
</div>



<ngx-smart-modal #newpurchaseorder identifier="newpurchaseorder">
  <h3>Purchase Order({{warehouse_name}}): {{purchaseOrderNumbers}}. {{purchaseOrderCreated | date: 'fullDate'}} </h3>


  <div class="row">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12">
            <button class="btn btn-default float-right" (click)="printPurchaseOrder()" title="print this purchase order !"><i
                class="fa fa-print fa-2x"></i></button>
            <!--begin::Form-->
            <form class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed" #thepurchase=ngForm>
              <div class="m-portlet__body">
                <div class="form-group m-form__group row">
                  <div class="col-lg-4">
                    <label>Purchase Order Number:</label>
                    <input type="text" class="form-control m-input" name="order_no" [(ngModel)]="purchaseOrder.order_no"
                      placeholder="Purchase order" readonly="">
                    <span class="m-form__help" style="color: red;">Purchase orders number are generated automatically</span>
                  </div>
                  <div class="col-lg-4">
                    <label class="">Expected delivery date</label>
                    <input type="date" class="form-control m-input" name="expected_delivered_date" [(ngModel)]="purchaseOrder.expected_delivered_date"
                      placeholder="Expected delivery date" required>
                    <span class="m-form__help">Please enter expected delivery date</span>
                  </div>
                  <div class="col-lg-4">
                    <label>Vendor:</label>
                    <div class="input-group m-input-group m-input-group--square">
                      <div class="input-group-prepend"><span class="input-group-text"><i class="la la-user"></i></span></div>
                      <select name="vendor" id="" class="form-control" name="vendor_id" [(ngModel)]="purchaseOrder.vendor_id"
                        required>
                        <option value="0">Select Vendor</option>
                        <option value="{{item.id}}" *ngFor="let item of vendors">{{item.name | uppercase}}</option>
                      </select>
                    </div>
                    <span class="m-form__help">Please select vendor or <a href="#" (click)="openVendorForm($event)"
                        title="add new vendor">Create new
                        one</a></span>
                  </div>
                </div>


              </div>
              <div class="m-portlet__foot m-portlet__no-border m-portlet__foot--fit">
                <div class="m-form__actions m-form__actions--solid">
                  <div class="row">
                    <div class="col-lg-4"></div>
                    <div class="col-lg-8">
                      <button type="button" class="btn btn-primary" [disabled]="!thepurchase.valid" (click)="updatePurchaseOrder()">Update
                        changes </button>
                      <span style="color: green; font-size: 20px; font-weight: bold;">{{purchaseGrandTotal | currency:
                        ' NGN '}}</span>
                      <span class="float-right" style="color: red; font-size: 20px;">Row count ({{rowCount}})</span>
                    </div>
                  </div>
                </div>
              </div>
            </form>

            <!--end::Form-->

            <div class="m-section__content">
              <table class="table">
                <thead>
                  <tr>
                    <th>Product</th>
                    <th>Unit Cost</th>
                    <th>Quantity</th>
                    <th>Box</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of purchaseListings; let i = index;">
                    <td>
                      <select name="{{item.product}}" class="form-control" [(ngModel)]="item.product" id="">
                        <option value="0">Select Product</option>
                        <option value="{{pro.id}}" *ngFor="let pro of products">{{pro.name | uppercase}} [{{pro.code}}]</option>
                      </select>
                    </td>
                    <td>
                      <input type="text" class="form-control" placeholder="Cost Price" value="1" name="{{item.cost}}"
                        [(ngModel)]="item.cost">
                    </td>
                    <td>
                      <input type="text" class="form-control" placeholder="Quantity" value="1" name="{{item.quantity}}"
                        [(ngModel)]="item.quantity">
                    </td>
                    <!--td>
                      <select name="{{item.tax}}" class="form-control" [(ngModel)]="item.tax" id="" (change)="getLineTotalTax()">
                        <option value="0">No Tax</option>
                        <option value="1">5%</option>
                      </select>
                    </td> -->
                    <!--<td>
                      <input type="text" class="form-control" placeholder="Serial no separated by comma" name="{{item.serialno}}"
                        [(ngModel)]="item.serialno">
                    </td> -->

                    <td>
                      <select name="{{item.box}}" class="form-control" [(ngModel)]="item.box" id="">
                        <option value="0">No Box</option>
                        <option value="{{item.id}}" *ngFor="let item of boxes">{{item.name |
                          uppercase}}/{{item.boxid}}-{{item.charge_box_id}}</option>
                      </select>
                    </td>

                    <td>
                      <button class="btn btn-default" type="button" (click)="deleteFieldValue(i)" title="Delete row">
                        <i class="flaticon-delete"></i></button>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <select name="product" class="form-control" [(ngModel)]="newPurchaseListing.product" id="newPurchaseListingProduct">
                        <option value="0">Select Product</option>
                        <option value="{{pro.id}}" *ngFor="let pro of products">{{pro.name | uppercase}} [{{pro.code}}]</option>
                      </select>
                    </td>
                    <td>
                      <input type="text" class="form-control" placeholder="Cost Price" value="1" name="cost"
                        [(ngModel)]="newPurchaseListing.cost">
                    </td>
                    <td>
                      <input type="text" class="form-control" placeholder="Quantity" value="1" name="quantity"
                        [(ngModel)]="newPurchaseListing.quantity">
                    </td>
                    <!--  <td>
                      <select name="tax" class="form-control" [(ngModel)]="newPurchaseListing.tax" id=""
                        (change)="getLineTotalTax()">
                        <option value="0">No Tax</option>
                        <option value="1">5%</option>
                      </select>
                    </td>-->
                    <!--<td>
                      <input type="text" class="form-control" placeholder="Serial no separated by comma" name="serialno"
                        [(ngModel)]="newPurchaseListing.serialno">
                    </td> -->
                    <td>
                      <select name="box" class="form-control" [(ngModel)]="newPurchaseListing.box" id="">
                        <option value="0">No Box</option>
                        <option value="{{item.id}}" *ngFor="let item of boxes">{{item.name |
                          uppercase}}/{{item.boxid}}-{{item.charge_box_id}}</option>
                      </select>
                    </td>
                    <td>
                      <button class="btn btn-default" type="button" (click)="addFieldValue()" title="Add new row"> <i
                          class="flaticon-plus"></i></button>
                    </td>
                  </tr>
                </tbody>

              </table>
            </div>


            <button type="button" class="btn btn-primary" [disabled]="!purchaseOrderNumbers" (click)="UpdatePurchaseListings()">Update
              Changes</button>
            &nbsp;<button type="button" class="btn btn-default" (click)="clearAll()">Clear all</button>
            <button type="button" class="btn btn-danger float-right" *ngIf="!orderSentToWarehouse" [disabled]="!pushToMywarehouse"
              (click)="sendToWarehouse()">Send to myWarehouse</button>
            <button type="button" class="btn btn-success float-right" *ngIf="orderSentToWarehouse" (click)="warehouseOrder()">Order
              has been sent to myWarehouse for processing</button>
          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="newpurchaseorder.close()">Close</button>
</ngx-smart-modal>




<ngx-smart-modal #printpurchase identifier="printpurchase">
  <h3>Purchase Order ({{warehouse_name}}) -> {{purchaseOrderNumbers}}</h3>


  <div class="row">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12">

            <button class="btn btn-default float-right" (click)="printPdf()" title="print this purchase order !"><i
                class="fa fa-file-pdf fa-2x"></i></button>

            <div class="m-portlet" id="contentToConvert">
              <div class="m-portlet__body m-portlet__body--no-padding">
                <div class="m-invoice-2">
                  <div class="m-invoice__wrapper">
                    <div class="m-invoice__head" style="background-image: url(../../assets/app/media/img//logos/bg-6.jpg);">
                      <div class="m-invoice__container m-invoice__container--centered">
                        <div class="m-invoice__logo">
                          <a href="#">
                            <h1>Purchase Order</h1>
                            <span style="font-size:20px;">{{purchaseOrderNumbers}}</span>
                          </a>
                          <a href="#">
                            <img src="{{profile.logo}}" height="100px" width="100px">
                          </a>
                        </div>
                        <span class="m-invoice__desc">
                          <span>{{profile.name}}, {{profile.address}}</span>
                          <span>{{profile.phone}}, {{profile.email}}, {{profile.website}}</span>
                        </span>
                        <div class="m-invoice__items">
                          <div class="m-invoice__item">
                            <span class="m-invoice__subtitle">Date</span>
                            <span class="m-invoice__text">{{purchaseOrderCreated | date: 'fullDate'}}</span>
                          </div>
                          <div class="m-invoice__item">
                            <span class="m-invoice__subtitle">SHIP TO.</span>
                            <span class="m-invoice__text">{{purchaseOrderNumbers}}</span>
                            <span class="m-invoice__text" *ngIf="orderSentToWarehouse">{{warehouse_name}}</span>
                            <span class="m-invoice__text" *ngIf="orderSentToWarehouse">{{warehouse_address}}</span>
                            <span class="m-invoice__text" *ngIf="!orderSentToWarehouse" style="color:red;">Same as
                              Above</span>
                          </div>
                          <div class="m-invoice__item">
                            <span class="m-invoice__subtitle">VENDOR.</span>
                            <span class="m-invoice__text">{{Selectedvendor.name}}, {{Selectedvendor.address}}<br>{{Selectedvendor.phone}},
                              {{Selectedvendor.email}}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div *ngIf="!orderSentToWarehouse">
                      <div class="m-invoice__body m-invoice__body--centered">
                        <div class="table-responsive">
                          <table class="table">
                            <thead>
                              <tr>
                                <th>ITEM CODE</th>
                                <th>DESCRIPTION</th>
                                <th>COST</th>
                                <th>QUANTITY</th>
                                <th>LINE TOTAL</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let item of printPurchaseListings">
                                <td>{{item.product_row_code}}</td>
                                <td>{{item.description | uppercase}}</td>
                                <td>{{item.cost | currency: 'NGN'}}</td>
                                <td>{{item.quantity}}</td>
                                <td>{{item.lineTotal | currency: 'NGN'}}</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <div class="m-invoice__footer">
                        <div class="m-invoice__table  m-invoice__table--centered table-responsive">
                          <table class="table">
                            <thead>
                              <tr>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>GRAND TOTAL</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td class="m--font-danger">{{printPurchaseListingTotal | currency: 'NGN'}}</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>



                    <div *ngIf="orderSentToWarehouse">
                      <div class="m-invoice__body m-invoice__body--centered">
                        <div class="table-responsive">
                          <table class="table">
                            <thead>
                              <tr>
                                <th>ITEM CODE</th>
                                <th>BOX CODE</th>
                                <th>DESCRIPTION</th>
                                <th>COST</th>
                                <th>QUANTITY</th>
                                <th>LINE TOTAL</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let item of printPurchaseListings">
                                <td>{{item.product_row_code}}</td>
                                <td>{{item.boxcode}}</td>
                                <td>{{item.description | uppercase}}</td>
                                <td>{{item.cost | currency: 'NGN'}}</td>
                                <td>{{item.quantity}}</td>
                                <td>{{item.lineTotal | currency: 'NGN'}}</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <div class="m-invoice__footer">
                        <div class="m-invoice__table  m-invoice__table--centered table-responsive">
                          <table class="table">
                            <thead>
                              <tr>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>GRAND TOTAL</td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td class="m--font-danger">{{printPurchaseListingTotal | currency: 'NGN'}}</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>



                  </div>
                </div>
              </div>
            </div>

          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="printpurchase.close()">Close</button>
</ngx-smart-modal>




<ngx-smart-modal #client_massage identifier="client_massage">
  <h3>{{warehouseName}} :: {{order_remarks}} - {{order_number}} </h3>


  <div class="row">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12">
            <div class="m-portlet m-portlet--full-height ">
              <div class="m-portlet__head">
                <div class="m-portlet__head-caption">
                  <div class="m-portlet__head-title">
                    <!--<h3 class="m-portlet__head-text">
                    </h3> -->
                    <button (click)="openNewBox()" class="btn btn-danger float-right">{{message_text}}</button>
                    <div *ngIf="new_message">
                      <form #addmessageForm=ngForm (ngSubmit)="addNewMessage()">
                        <div class="form-group">
                          <label>New Message</label>
                          <textarea class="form-control" name="message" [(ngModel)]="notification.message" placeholder="New message here"
                            cols="100" rows="5" required=""></textarea>
                        </div>
                        <button class="btn btn-info pull-right" [disabled]="!addmessageForm.valid">Send message</button>
                      </form>
                    </div>
                  </div>
                </div>

              </div>
              <div class="m-portlet__body">
                <div class="m-widget3">
                  <div class="m-widget3__item" *ngFor="let item of clientmessages">
                    <div class="m-widget3__header">

                      <div class="m-widget3__info">
                        <span class="m-widget3__username" style="font-weight: bold;">
                          {{item.created_by}}
                        </span><br>
                        <span class="m-widget3__time">
                          {{item.created | date: 'full'}}
                        </span>
                      </div>
                      <span class="m-widget3__status m--font-info" *ngIf="item.status == 0">
                        MyWarehouse
                      </span>
                      <span class="m-widget3__status m--font-info" *ngIf="item.status == 1">
                        Me
                      </span>
                    </div>
                    <div class="m-widget3__body">
                      <p class="m-widget3__text" [ngClass]="item.status == 0 ? 'text-danger': 'text-success'">
                        {{item.message}}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="client_massage.close()">Close</button>
</ngx-smart-modal>













<ngx-smart-modal #productNew identifier="productNew">
  <h3>Product</h3>


  <div class="row">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12">
            <form #productForm=ngForm>
              <div class="row">
                <div class="col-xl-6">
                  <div class="form-group">
                    <label for="recipient-name" class="form-control-label">Product Code</label>
                    <input type="text" class="form-control" id="recipient-name" name="code" placeholder="Product code"
                      [(ngModel)]="product.code">
                  </div>
                  <div class="form-group">
                    <label for="recipient-name" class="form-control-label">Name</label>
                    <input type="text" class="form-control" id="recipient-name" name="name" placeholder="name"
                      [(ngModel)]="product.name" required>
                  </div>
                  <div class="form-group">
                    <label for="message-text3" class="form-control-label">Weight <span style="color: red">*</span></label>
                    <input type="number" class="form-control" id="recipient-name3" name="single_unit" placeholder="Weight in Kg."
                      [(ngModel)]="product.single_unit" required="">
                  </div>
                  <!--<div class="form-group">
                    <label for="message-text2" class="form-control-label">Case Measure</label>
                    <input type="text" class="form-control" id="recipient-name2" name="case_measure" placeholder="Case measure"
                      [(ngModel)]="product.case_measure">
                  </div>
                  <div class="form-group">
                    <label for="message-text2" class="form-control-label">Qty Per Case</label>
                    <input type="text" (keypress)="Onlynumber($event)" class="form-control" id="recipient-name2" name="qty_per_case"
                      placeholder="Quantity per case" [(ngModel)]="product.qty_per_case">
                  </div> -->

                </div>
                <div class="col-xl-6">
                  <div class="form-group">
                    <label for="message-text4" class="form-control-label">Description</label>
                    <textarea class="form-control" id="message-text4" name="description" placeholder="description"
                      [(ngModel)]="product.description"></textarea>
                  </div>
                  <!-- <div class="form-group">
                    <label for="message-text2" class="form-control-label">Size in Square Meter(sqm)</label>
                    <input type="text" class="form-control" id="recipient-name2" name="sqm" placeholder="Size in Square Meter(sqm). digit only"
                      [(ngModel)]="product.sqm" >
                  </div>
                  <div class="form-group">
                    <label for="message-text2" class="form-control-label">Cost Price</label>
                    <input type="text" (keypress)="Onlynumber($event)" class="form-control" id="recipient-name2" name="cost"
                      placeholder="Cost Price" [(ngModel)]="product.cost">
                  </div>-->
                  <div class="form-group">
                    <label for="message-text2" class="form-control-label">Selling Price</label>
                    <input type="text" class="form-control" id="recipient-name2" name="sale_price" placeholder="Selling Price"
                      [(ngModel)]="product.sale_price">
                  </div>
                </div>
              </div>

            </form>

            <div class="modal-footer">

              <button type="button" class="btn btn-primary" [disabled]="!productForm.valid" (click)="submitProduct()">Submit</button>
            </div>
          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="productNew.close()">Close</button>
</ngx-smart-modal>






<ngx-smart-modal #saleorderList identifier="saleorderList">
  <h3>Sale Orders ({{warehouse_name}}) -> Open and Delivered</h3>
  <div class="row">
    <div class="col-xl-12">
      <div class="m-portlet m-portlet--tabs">
        <div class="m-portlet__head">
          <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
              <button type="button" class="btn btn-info btn-sm m-btn m-btn--pill m-btn--wide" (click)="addNewSaleOrder()">Add
                New
                Sale Order
              </button>
            </div>
          </div>
          <div class="m-portlet__head-tools">
            <ul class="nav nav-tabs m-tabs-line m-tabs-line--right" role="tablist">
              <li class="nav-item m-tabs__item">
                <a class="nav-link m-tabs__link active" data-toggle="tab" href="#m_portlet_base_demo_1_tab_content"
                  role="tab" (click)="getOpenSaleOrders(0)">
                  <i class="flaticon-folder-3"></i> Open
                </a>
              </li>
              <li class="nav-item m-tabs__item">
                <a class="nav-link m-tabs__link" data-toggle="tab" href="#m_portlet_base_demo_2_tab_content" (click)="getOpenSaleOrders(1)"
                  role="tab">
                  <i class="flaticon-folder-2"></i> Delivered
                </a>
              </li>

            </ul>
          </div>
        </div>
        <div class="m-portlet__body">
          <div class="tab-content">
            <div class="tab-pane active" id="m_portlet_base_demo_1_tab_content" role="tabpanel">
              <div class="col-md-12">
                <span class="m-section__sub">
                  <div class="m-alert m-alert--icon m-alert--outline alert alert-primary" role="alert">
                    <div class="m-alert__icon">
                      <i class="la la-warning"></i>
                    </div>
                    <div class="m-alert__text">
                      <strong>Purchase Transactions ! </strong> This console shows the list of open sale
                      orders (created and sent).
                    </div>
                    <div class="m-alert__actions" style="width: 200px;">
                      <button type="button" class="btn btn-info btn-sm m-btn m-btn--pill m-btn--wide" (click)="addNewSaleOrder()">Add
                        New
                        Sale Order
                      </button>
                    </div>
                  </div>
                </span>
                <div class="m-section__content" style="overflow-y: auto; height: 500px ;">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Status</th>
                        <th>Order #</th>
                        <th>Customer</th>
                        <th>Expected</th>
                        <th>Remarks</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of saleLists" [ngClass]="item.remarks < 0 ? 'text-danger' : '' ">
                        <td>
                          <span *ngIf="item.send_warehouse == 1" class="m-badge m-badge--success" title="sent to myWarehouse for processing"></span>
                          <span *ngIf="item.send_warehouse == 0" class="m-badge m-badge--warning" title="Not yet sent"></span>
                        </td>
                        <td>{{item.order_no}}</td>
                        <td>{{item.name | uppercase}}</td>
                        <td>{{item.expected_delivered_date}}</td>
                        <td *ngIf="item.remarks < 0">
                          Overdue since {{item.remarks}} day(s)
                        </td>
                        <td *ngIf="item.remarks >= 0">
                          Expected in {{item.remarks}} day(s)
                        </td>
                        <td> <a href="#" title="View" (click)="viewSale(item.id, $event)"><i class="flaticon-arrows"></i></a>
                        </td>

                      </tr>
                    </tbody>


                  </table>
                </div>
              </div>
            </div>
            <div class="tab-pane" id="m_portlet_base_demo_2_tab_content" role="tabpanel">
              <div class="m-section__content" style="overflow-y: auto; height: 500px ;">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Status</th>
                      <th>Order #</th>
                      <th>Customer</th>
                      <th>Delivered</th>
                      <th></th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr *ngFor="let item of saleLists" [ngClass]="item.remarks < 0 ? 'text-danger' : '' ">
                      <td>
                        <span *ngIf="item.send_warehouse == 1" class="m-badge m-badge--success" title="sent to myWarehouse for processing"></span>
                        <span *ngIf="item.send_warehouse == 0" class="m-badge m-badge--warning" title="Not yet sent"></span>
                      </td>
                      <td>{{item.order_no}}</td>
                      <td>{{item.name | uppercase}}</td>
                      <td>{{item.delivered_date}}</td>
                      <td> <a href="#" title="View" (click)="viewSale(item.id, $event)"><i class="flaticon-arrows"></i></a>
                      </td>

                    </tr>
                  </tbody>


                </table>
              </div>
            </div>




          </div>
        </div>
      </div>








    </div>

  </div>


  <button (click)="purchaseorderlist.close()">Close</button>
</ngx-smart-modal>




<ngx-smart-modal #newsaleorder identifier="newsaleorder">
  <h3>Order Fulfilment ({{warehouse_name}}): {{saleOrderNumber}}. {{saleOrderCreated | date: 'fullDate'}} </h3>


  <div class="row">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12">
            <button class="btn btn-default float-right" (click)="printSaleOrder()" title="print this sale order !"><i
                class="fa fa-print fa-2x"></i></button>
            <!--begin::Form-->
            <form class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed" #theSale=ngForm>
              <div class="m-portlet__body">
                <div class="form-group m-form__group row">
                  <div class="col-lg-4">
                    <label>Sale Order Number:</label>
                    <input type="text" class="form-control m-input" name="order_no" [(ngModel)]="saleOrder.order_no"
                      placeholder="Sale order" readonly="">
                    <span class="m-form__help" style="color: red;">Sale orders number are generated automatically</span>
                  </div>
                  <div class="col-lg-4">
                    <label class="">Expected delivery date</label>
                    <input type="date" class="form-control m-input" name="expected_delivered_date" [(ngModel)]="saleOrder.expected_delivered_date"
                      placeholder="Expected delivery date" required>
                    <span class="m-form__help">Please enter expected delivery date</span>
                  </div>
                  <div class="col-lg-4">
                    <label>Customer:</label>
                    <div class="input-group m-input-group m-input-group--square">
                      <div class="input-group-prepend"><span class="input-group-text"><i class="la la-user"></i></span></div>
                      <select name="customer_id" id="" class="form-control" name="customer_id" [(ngModel)]="saleOrder.customer_id"
                        required>
                        <option value="0">Select Customer</option>
                        <option value="{{item.id}}" *ngFor="let item of customers">{{item.name | uppercase}}</option>
                      </select>
                    </div>
                    <span class="m-form__help">Please select customer or <a href="#" (click)="openVendorForm2($event)"
                        title="add new Customer">Create new
                        one</a></span>
                  </div>
                </div>


              </div>
              <div class="m-portlet__foot m-portlet__no-border m-portlet__foot--fit">
                <div class="m-form__actions m-form__actions--solid">
                  <div class="row">
                    <div class="col-lg-3">
                      <label>Box</label>
                      <select name="box" class="form-control" (change)="getBoxProduct($event.target.value)" name="box"
                        [(ngModel)]="sales.box">
                        <option value="0">No Box</option>
                        <option value="{{item.id}}" *ngFor="let item of boxes; let i = index;">{{item.name |
                          uppercase}}/{{item.boxid}}-{{item.charge_box_id}}</option>
                      </select>
                    </div>
                    <div class="col-lg-4">
                      <label for="">Product</label>
                      <select name="product" class="form-control" name="product" [(ngModel)]="sales.product" (change)="getCostPrice2($event)">
                        <option value="0">Select product</option>
                        <option value="{{item.id}}" *ngFor="let item of products2">{{item.name |
                          uppercase}}-{{item.product_row_code}}</option>
                      </select>
                    </div>
                    <div class="col-lg-1">
                      <label>Stock</label>
                      <input type="text" class="form-control" name="stock" readonly="" [(ngModel)]="sales.stock" />
                    </div>
                    <div class="col-lg-2">
                      <label>Price</label>
                      <input type="text" class="form-control" name="price" [(ngModel)]="sales.price" />
                    </div>
                    <div class="col-lg-1">
                      <label>Quantity</label>
                      <input type="text" class="form-control" name="quantity" [(ngModel)]="sales.quantity" />
                    </div>
                    <div class="col-lg-1">
                      <label>Select</label>
                      <button class="btn btn-danger" (click)="addsale()" title="select"><i class="flaticon-interface-5"></i></button>
                    </div>
                    <br />

                  </div>
                  <br />
                  <div class="text-center">
                    <input type="checkbox" name="applySaleTax" [checked]="applySaleTax" (change)="getAppliedTax()" />
                    <span style="font-weight: bold"> Apply tax (5%)</span> &nbsp; &nbsp;

                    <input type="checkbox" name="collectMoney" [checked]="collectMoney" (change)="getCollectMoney()"
                      title="we can help you collect the money upon the successful delivery of the orders" />
                    <span style="font-weight: bold"> Help me collect money</span>
                    &nbsp; &nbsp;

                    <div *ngIf="saleListings.length > 0">
                      <hr />
                      <span style="color: red; font-weight: bold">Logistics : </span> &nbsp; &nbsp;

                      <input type="radio" name="pickup" [value]=3 [(ngModel)]="saleOrder.logistics" (change)="getLogistic()"
                        [disabled]="Ace.paid" /><span style="font-weight: bold" title="Authorize third party(ACE) to help you deliver orders to customer">
                        Ace Pick up</span> &nbsp; &nbsp;

                      <input type="radio" name="pickup" [value]=2 [(ngModel)]="saleOrder.logistics" (change)="getLogistic()"
                        [disabled]="Ace.paid" /><span style="font-weight: bold" title="i will deliver the orders by myself !">
                        Personal
                        Pick up</span>
                      &nbsp; &nbsp;
                      <input type="radio" name="pickup" [value]=1 [(ngModel)]="saleOrder.logistics" (change)="getLogistic()"
                        [disabled]="Ace.paid" /><span style="font-weight: bold" title="Authorize third party(MAX) to help you deliver orders to customer">
                        Max Pick up(Lagos only)</span>

                    </div>

                  </div>

                </div>
              </div>
            </form>

            <!--end::Form-->

            <div class="m-section__content">
              <span style="font-weight:bold;">Row count: {{saleRow}}</span>
              <div class="alert alert-success" *ngIf="collectMoney">You have authorized us to collect your money
                ({{saleGrandTotal | currency: 'NGN'}}) on your behave </div>

              <div class="alert alert-info" *ngIf="Ace.paid">You have subscribed for {{Ace.name}}, Amount:
                ({{Ace.amount | currency: 'NGN'}})</div>

              <table class="table">
                <thead>
                  <tr>
                    <th>Box</th>
                    <th>Product</th>
                    <th>Unit Price</th>
                    <th>Quantity</th>
                    <th>Line total</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of saleListings; let i = index">
                    <td>{{item.selectedBox | uppercase }}</td>
                    <td>{{item.selectedProduct | uppercase}}</td>
                    <td>{{item.price | currency: 'NGN'}}</td>
                    <td>{{item.quantity}}</td>
                    <td>{{item.quantity * item.price | currency: 'NGN'}}</td>
                    <td>
                      <button class="btn btn-default" (click)="deleteSaleRow(i)"><i class="flaticon-delete"></i></button>
                    </td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr style="font-weight: bold; font-size:16px;">
                    <td colspan="5">Total</td>
                    <td>{{salesTotal | currency: 'NGN'}}</td>
                  </tr>
                  <tr style="font-weight: bold; font-size:16px;">
                    <td colspan="5">Tax (5%)</td>
                    <td>{{saleTaxTotal | currency: 'NGN'}}</td>
                  </tr>
                  <tr style="font-weight: bold; font-size:16px;">
                    <td colspan="5">Grand Total</td>
                    <td>{{saleGrandTotal | currency: 'NGN'}}</td>
                  </tr>
                </tfoot>


              </table>
            </div>


            <button type="button" [disabled]="saleListings.length <= 0" (click)="UpdateSalesChanges()" class="btn btn-primary">Update
              Changes</button>
            &nbsp;<button type="button" class="btn btn-default" (click)="clearAll2()">Clear all</button>

            <button *ngIf="saleOrder.send_warehouse==1" class="btn btn-success float-right">Order has been to sent for
              processing...</button>
            <button type="button" *ngIf="saleOrder.send_warehouse != 1" (click)="SendSalesToWarehouse()" class="btn btn-danger float-right"
              [disabled]="saleListings.length <= 0">Send to
              myWarehouse</button>

          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="newsaleorder.close()">Close</button>
</ngx-smart-modal>


<ngx-smart-modal #vendorMyForm identifier="vendorMyForm">
  <h3>Add Vendor/Customer</h3>


  <div class="row">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12">
            <form #vendorForm2=ngForm>
              <div class="form-group">
                <label for="recipient-name" class="form-control-label">Vendor/Customer</label>
                <select name="vendorCustomer" [(ngModel)]="vendor.vendorCustomer" id="" class="form-control">
                  <option value="1">Vendor</option>
                  <option value="2">Customer</option>
                </select>
              </div>
              <div class="form-group">
                <label for="recipient-name" class="form-control-label">Name</label>
                <input type="text" class="form-control" id="recipient-name" name="name" placeholder="name" [(ngModel)]="vendor.name"
                  required>
              </div>
              <div class="form-group">
                <label for="message-text2" class="form-control-label">Phone</label>
                <input type="text" class="form-control" id="recipient-name2" name="phone" placeholder="phone"
                  [(ngModel)]="vendor.phone" required>
              </div>
              <div class="form-group">
                <label for="message-text3" class="form-control-label">Email</label>
                <input type="text" class="form-control" id="recipient-name3" name="email" placeholder="email"
                  [(ngModel)]="vendor.email">
              </div>
              <div class="form-group">
                <label for="message-text4" class="form-control-label">Address</label>
                <textarea class="form-control" id="message-text4" name="adddress" placeholder="address" [(ngModel)]="vendor.address"></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" [disabled]="!vendorForm2.valid" (click)="submitVendor()">Submit</button>
          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="vendorMyForm.close()">Close</button>
</ngx-smart-modal>



<ngx-smart-modal #maxpickup identifier="maxpickup">
  <h3>MAX PickUp:- {{warehouse_name}} :: {{warehouseLocation}}</h3>


  <div class="row" *ngIf="saleOrder.logistics==1">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12">

            <div class="form-group">
              <label for="" class="font-weight">Enter your destination pick up</label>
              <input type="text" name="destination" [(ngModel)]="max.destination.address" class="form-control"
                placeholder="E.g No 24 Alao street, lagos">
            </div>

            <div class="form-group">
              <label for="" class="font-weight">Enter pick up date</label>
              <input type="date" name="pickup_date" [(ngModel)]="pickup_date" class="form-control" placeholder="E.g 01/24/2019">
            </div>

            <div>
              <button class="btn btn-info btn-lg" (click)="getPriceEstimate()">Get price estimate</button>
            </div>

          </div>
          <br />
          <div class="col-md-12">
            <div class="alert alert-warning" *ngIf="show_max_result">
              <div class="pull-right" style="font-size: 26px">{{maxResult.delivery_fee | currency: 'NGN'}}</div>
              <ul>
                <li>
                  Delivery : {{maxResult.delivery}}
                </li>
                <li>
                  Pick Up : {{maxResult.pickup}}
                </li>
                <li>Delivery fee: <strong>{{maxResult.delivery_fee | currency: 'NGN'}}</strong></li>
                <li>Distance: {{maxResult.distance}}. Duration: {{maxResult.duration}}</li>
              </ul>
              <br />
              <!-- <div>
                <button class="btn btn-info btn-lg" (click)="confirmPickupDate()"><i class="fa fa-check"></i> Confirm
                  pick up </button>
              </div> -->

              <div *ngIf="payViaWallet">
                <button class="btn btn-info" (click)="confirmPickupDate()"><i class="fa fa-check"></i> Pay through my
                  wallet {{walletTotal | currency: 'NGN'}} </button>
              </div>

              <div *ngIf="!payViaWallet">
                <hr />
                <form class="form-inline">
                  <input type="text" placeholder="Card Number" name="number" [(ngModel)]="charge.card.number"
                    (keypress)="Onlynumber($event)" class="form-control" />
                  <input type="text" placeholder="Month" name="expiry_month" [(ngModel)]="charge.card.expiry_month"
                    (keypress)="Onlynumber($event)" class="form-control" maxlength="2" />
                  <input type="text" name="expiry_year" [(ngModel)]="charge.card.expiry_year" placeholder="Year"
                    (keypress)="Onlynumber($event)" class="form-control" maxlength="2" />
                  <input type="text" name="cvv" [(ngModel)]="charge.card.cvv" placeholder="cvv" (keypress)="Onlynumber($event)"
                    class="form-control" maxlength="3" />
                  <button class="btn btn-info" (click)="payNowPickup()">Pay now</button>
                </form>
              </div>
            </div>

          </div>



          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>

  <div class="row" *ngIf="saleOrder.logistics == 2">
    <div class="col-md-12">

      <div class="form-group">
        <label for="" class="font-weight">Enter pick up date</label>
        <input type="date" name="pickup_date" [(ngModel)]="pickup_date" class="form-control" placeholder="E.g 01/24/2019">
      </div>

      <div>
        <button class="btn btn-info btn-lg" (click)="confirmPersonalPickup()">Confirm personal pick up</button>
      </div>
      <br /><br />

    </div>
  </div>

  <div class="row" *ngIf="saleOrder.logistics==3">
    <div class="col-md-12">

      <div>
        <button class="btn btn-info btn-lg" (click)="getAcePriceList()">Get price list</button>
      </div>

      <br />
      <div *ngIf="aceprice">
        <table class="table table-stripe">
          <thead>
            <th>Weight</th>
            <th>ZoneA</th>
            <th>ZoneB</th>
            <th>ZoneC</th>
            <th>ZoneD</th>
            <th>ZoneE</th>
            <th>ZoneF</th>
          </thead>
          <tbody>
            <tr *ngFor="let item of acePriceList; let i = index;">
              <td>{{item.weigh}}</td>
              <td>{{item.zoneA + (0.1 * item.zoneA) | currency: 'NGN'}}
                <input type="radio" name="checkAcePrice" (change)="getSelectedPrice(item.zoneA, item.id, $event)" /></td>
              <td>{{item.zoneB + (0.1 * item.zoneB) | currency: 'NGN'}} <input title="click to select" type="radio"
                  name="checkAcePrice" (change)="getSelectedPrice(item.zoneB,item.id, $event)" /></td>
              <td>{{item.zoneC + (0.1 * item.zoneC) | currency: 'NGN'}} <input title="click to select" type="radio"
                  name="checkAcePrice" (change)="getSelectedPrice(item.zoneC,item.id, $event)" /></td>
              <td>{{item.zoneD + (0.1 * item.zoneD) | currency: 'NGN'}} <input title="click to select" type="radio"
                  name="checkAcePrice" (change)="getSelectedPrice(item.zoneD,item.id, $event)" /></td>
              <td>{{item.zoneE + (0.1 * item.zoneE) | currency: 'NGN'}} <input title="click to select" type="radio"
                  name="checkAcePrice" (change)="getSelectedPrice(item.zoneE,item.id, $event)" /></td>
              <td>{{item.zoneF + (0.1 * item.zoneF) | currency: 'NGN'}} <input title="click to select" type="radio"
                  name="checkAcePrice" (change)="getSelectedPrice(item.zoneF,item.id, $event)" /></td>

            </tr>
          </tbody>
        </table>
        <div class="alert alert-warning">
          <div class="pull-right" style="font-size: 26px">{{chargePrice | currency: 'NGN'}}</div>
          <ul>
            <li>ZoneA : Lagos(excluding badagry, epe and ikorodu)</li>
            <li>ZoneB : Lagos (badagry, epe and ikorodu)</li>
            <li>ZoneC : FCT(abuja), Rivers(portharcult)</li>
            <li>ZoneD : FCT(excluding Abaji and Abuja)</li>
            <li>ZoneE : Delta, Edo, Ekiti, Kwara, Ogun, Ondo, Osun, Oyo</li>
            <li>ZoneF : Abia, Adamawa, Akwa ibom, Anambra, Bauchi. Bayelsa, Benue, Borno, Cross river, Ebonyi, Enugu,
              FCT(abaji), Gombe, Imo, Jigawa, Kaduna, Kano, Katsina, Kebbi, Kogi, Nasarrawa, Niger, Plateau,
              Rivers,(excluding port-harcourt), Sokoto, Taraba, Yobe, Zamfara</li>
          </ul>
          <div class="form-inline">
            <div class="form-group">
              <label for="" class="font-weight">Enter pick up date</label>
              <input type="date" name="pickup_date" [(ngModel)]="pickup_date" class="form-control" placeholder="E.g 01/24/2019">
            </div>
            &nbsp; &nbsp;




            <div *ngIf="payViaWallet">
              <button class="btn btn-info" (click)="confirmAcePickup()"><i class="fa fa-check"></i> Pay through my
                wallet {{walletTotal | currency: 'NGN'}} </button>
            </div>

            <div *ngIf="!payViaWallet">
              <hr />
              <form class="form-inline">
                <input type="text" placeholder="Card Number" name="number" [(ngModel)]="charge.card.number" (keypress)="Onlynumber($event)"
                  class="form-control" />
                <input type="text" placeholder="Month" name="expiry_month" [(ngModel)]="charge.card.expiry_month"
                  (keypress)="Onlynumber($event)" class="form-control" maxlength="2" />
                <input type="text" name="expiry_year" [(ngModel)]="charge.card.expiry_year" placeholder="Year"
                  (keypress)="Onlynumber($event)" class="form-control" maxlength="2" />
                <input type="text" name="cvv" [(ngModel)]="charge.card.cvv" placeholder="cvv" (keypress)="Onlynumber($event)"
                  class="form-control" maxlength="3" />
                <button class="btn btn-info" (click)="payNowPickup()">Pay now</button>
              </form>
            </div>

          </div>
        </div>
      </div>


    </div>
  </div>



  <button (click)="maxpickup.close()">Close</button>
</ngx-smart-modal>


<ngx-smart-modal #warehouseInventory identifier="warehouseInventory">
  <h3>Inventory - {{warehouseName}} :: {{warehouseLocation}}</h3>


  <div class="row">
    <div class="col-xl-12">

      <!--begin::Portlet-->
      <div class="m-portlet">
        <div class="m-portlet__body">

          <!--begin::Section-->
          <div class="col-md-12">
            <table class="table table">
              <thead>
                <tr>
                  <td>Box</td>
                  <td>Total quantity</td>
                  <td class="text-center">Expired</td>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of inventories">

                  <td>
                    <button type="button" title="click to see inventory in this box" (click)="showBoxInventory(item.charge_box)"
                      class="btn m-btn--pill btn-outline-brand m-btn m-btn--custom"> {{item.name}} -
                      {{item.charge_box_id}}</button>
                    <div *ngIf="invBox">
                      <h3>Inventory - {{item.name}} - {{item.charge_box_id}}</h3>
                      <table class="table table-striped">
                        <thead>
                          <tr>
                            <th>Product_row_nuber</th>
                            <th>Name</th>
                            <th>Code</th>
                            <th>Description</th>
                            <th>Total quantity</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of boxes_inventories">
                            <td>{{item.charge_box_id}}-{{item.charge_key}}</td>
                            <td>{{item.name }}</td>
                            <td>{{item.code }}</td>
                            <td>{{item.description }}</td>
                            <td>{{item.total}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>

                  </td>
                  <td>{{item.total}}</td>
                  <td class="text-center" *ngIf="item.remain_days >= 0" style="background-color:green; color:#fff">{{item.remain_days}}d</td>
                  <td class="text-center" *ngIf="item.remain_days < 0" style="background-color:red; color:#fff">{{item.remain_days}}
                    days</td>
                </tr>
              </tbody>
            </table>

          </div>

          <!--end::Section-->


        </div>

        <!--end::Form-->
      </div>

      <!--end::Portlet-->



    </div>

  </div>



  <button (click)="warehouseInventory.close()">Close</button>
</ngx-smart-modal>
